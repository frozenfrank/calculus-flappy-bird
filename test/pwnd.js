// Authored by James Finlinson 2022
// Copy right OneClick, LLC

/*! For license information please see script-bundle.min.js.LICENSE.txt */
!function(){"use strict";var e={"./src/script/compile-data.ts":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.compileData=void 0,t.compileData=function(){const e="https://app.hotschedules.com/hs/spring",t=6048e5;function n(e,t){return i(t.find((t=>t.id===e.clientId)).externalRef,5)}function a(t){const n=u();return Promise.all([r(`${e}/client/employee/?active=true`),r(`${e}/client/jobs/?_=${n}`),r(`${e}/client/roles/?_=${n}`),r(`${e}/client/locations/?_=${n}`),r(`${e}/employee/${t.userId}/schedule?_=${n}`),r(`${e}/my/clients?_=${n}`)])}function o(n){const a=new Date(+n+t),o=s(n),i=s(a),l=c(n),d=c(a),p=u();return Promise.all([r(`${e}/shifts/posted/?start=${o}&end=${i}&_=${p}`),r(`${e}/scheduling/shift/?start=${o}T00%3A00&end=${i}T00%3A00&_=${p}`),r(`${e}/scheduling/day-notes?startDate=${o}&endDate=${o}&_=${p}`)]).then((e=>({start:o,end:i,startDate:l,endDate:d,shifts:e[0],unpostedShifts:e[1],notes:e[2]})))}function r(e){return fetch(e).then((e=>e.json()))}function s(e){return i(e.getFullYear(),4)+"-"+i(e.getMonth()+1,2)+"-"+i(e.getDate(),2)}function i(e,t){return(""+e).padStart(t,"0")}function u(){return""+(new Date).valueOf()}function c(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))}function l(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*a));return t}return function(){const s=new Date,i=new Date(+s+864e5*(0-s.getDay()));return i.setHours(0,0,0,0),function(){const t=u();return r(`${e}/my/session?_=${t}`)}().then((e=>Promise.all([e,a(e),o(new Date(+i+0)),o(new Date(+i+6048e5)),o(new Date(+i+2*t))]))).then((([e,t,a,o,r])=>{const i=function(...e){const t={weeks:[],weekData:{}};for(let e of arguments){const n=l(32);t.weeks.push({startDate:e.startDate,endDate:e.endDate,dataId:n}),t.weekData[n]=e}return t}(a,o,r);return{uploadDate:s,storeNumber:n(e,t[5]),bookmarkletVersion:1,session:e,employees:t[0],jobs:t[1],roles:t[2],locations:t[3],schedules:t[4],clients:t[5],weeks:i.weeks,weekData:i.weekData}}))}()}},"./src/script/upload-data.ts":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.uploadData=void 0,t.uploadData=function(e,t){return console.log(`Uploading data to ${t}: `,e),console.warn("UAID: uploadData not yet implemented"),Promise.resolve(!1)}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}var a={};!function(){var e=a;Object.defineProperty(e,"__esModule",{value:!0});const t=n("./src/script/compile-data.ts"),o=n("./src/script/upload-data.ts");window.OC_UAID=function(){return(0,t.compileData)().then((e=>(0,o.uploadData)(e,"some/upload/location"))).then((e=>{e?alert("✅ Data uploaded!"):alert("⚠️ Data NOT uploaded.")})).catch((e=>{console.log("Error executing User Authorized and Initiated Data transfer (UAID): "+e),alert("❌ Error uploading data")}))}}()}();
//# sourceMappingURL=script-bundle.min.js.map
